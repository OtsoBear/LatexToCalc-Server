<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portfolio of Otso Veisterä, an AI engineer and founder building production-ready solutions and pushing the boundaries of AI.">
    <title>Otso Veisterä | Portfolio</title>
    <link rel="icon" type="image/x-icon" href="/static/bear.ico">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YD6KGWH7Y6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-YD6KGWH7Y6');
    </script>
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sg1pyt2jlh");
    </script>
    <!-- Preload the translation page for instant navigation -->
    <link rel="preload" href="https://otso.veistera.com/translate" as="document">
    <script type="importmap">
        {
          "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.174.0/build/three.module.js"
          }
        }
    </script>
    <script src="https://unpkg.com/es-module-shims@1.5.0/dist/es-module-shims.js"></script>
    <style>
        html {
            background: #000;
        }
        
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            background: radial-gradient(ellipse at center, rgba(10, 10, 25, 1) 0%, #000 70%);
            color: #fff;
            font-family: 'Space Mono', monospace;
            overflow-x: hidden;
            height: 300vh;
            cursor: default;
            font-size: 14px; /* Reduced base font size */
            --section-scale: 0.85; /* Reduced scale factor */
        }
        
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 0;
            pointer-events: none;
        }
        
        .section {
            position: fixed;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: all 0.8s ease;
            pointer-events: none;
            z-index: 10;
            padding: 0 10px; /* Add padding for better content visibility */
            box-sizing: border-box; /* Include padding in width calculation */
            transform: scale(var(--section-scale)); /* Scale down all sections */
            transform-origin: center center;
        }
        
        .section.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            max-width: 1000px; /* Reduced from 1200px */
            gap: 15px; /* Further reduced from 20px */
            padding: 0 5px;
            margin-top: 15px; /* Reduced from 20px */
            width: 100%; /* Ensure grid takes full width */
            box-sizing: border-box; /* Include padding in width calculation */
            transform-origin: top center;
        }
        
        .grid-item {
            position: relative;
            min-height: 180px; /* Reduced from 200px */
            transform: translateY(30px); /* Less movement */
            opacity: 0;
            transition: all 0.9s cubic-bezier(0.23, 1, 0.32, 1);
            display: flex;
            flex-direction: column;
        }
        
        .section.active .grid-item {
            transform: translateY(0);
            opacity: 1;
            transition-delay: calc(var(--delay) * 0.15s);
        }
        
        .glowing-text {
            position: relative;
            display: inline-block;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            padding: 0 5px;
        }
        
        .glowing-text:after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            bottom: 0;
            left: 0;
            background: linear-gradient(90deg, transparent, #ffffff, transparent);
            transition: width 0.5s ease;
        }
        
        .glowing-text:hover:after {
            width: 100%;
        }
        
        .text-reveal {
            position: relative;
            overflow: hidden;
        }
        
        .text-reveal:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #000, transparent);
            animation: text-reveal 1.5s forwards;
            animation-delay: calc(var(--delay) * 0.3s);
        }
        
        @keyframes text-reveal {
            0% {
                left: 0;
                width: 100%;
            }
            100% {
                left: 100%;
                width: 0;
            }
        }
        
        h1 {
            font-size: clamp(2rem, 4vw, 3.5rem); /* Reduced font size */
            margin: 0 0 5px 0; /* Less margin */
            letter-spacing: 8px; /* Less letter spacing */
            text-transform: uppercase;
            font-weight: 200;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            line-height: 1.2;
            text-align: center;
            opacity: 0.9;
            background: linear-gradient(90deg, #fff, #ffffff, #fff);
            background-size: 200% auto;
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            animation: shine 8s linear infinite;
        }
        
        @keyframes shine {
            to {
                background-position: 200% center;
            }
        }
        
        .terminal-box {
            background: rgba(10, 10, 25, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            padding: 15px; /* Reduced from 20px */
            font-family: 'Space Mono', monospace;
            color: #ffffff;
            max-width: 100%;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 255, 255, 0.2);
            transform: perspective(500px) rotateX(2deg); /* Reduced rotation angle */
            transition: all 0.3s ease;
            backdrop-filter: blur(6px);
            z-index: 2; /* Ensure terminal boxes appear above constellation */
            font-size: 1rem; /* Increased from 0.9rem */
            height: 100%;
        }
        
        .terminal-box:hover {
            transform: perspective(500px) rotateX(0);
            border-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5), 0 0 40px rgba(255, 255, 255, 0.3);
        }
        
        .terminal-box:before {
            content: '⦿  ⦿  ⦿';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            padding-left: 10px;
            font-size: 14px;
            line-height: 30px;
            color: rgba(255, 255, 255, 0.2);
        }
        
        .terminal-content {
            margin-top: 35px; /* Increased to prevent clipping with terminal header */
            line-height: 1.5;
        }
        
        .terminal-tag {
            color: #cccccc;
            font-size: 0.95rem;
        }
        
        .terminal-tag a {
            color: #cccccc; /* Gray for links */
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .terminal-tag a:hover {
            color: #ffffff; /* White on hover */
        }
        
        .terminal-command {
            color: #6b7280; /* Grey for all commands */
            opacity: 0.5;
            font-size: 0.95rem;
        }
        
        .terminal-string {
            color: #e0e0e0;
            font-size: 1rem;
        }
        
        .terminal-comment {
            color: #9e9e9e; /* Brightened from #626262 */
            font-style: italic;
        }
        
        .terminal-output {
            color: #ffffff;
            font-size: 1.05rem;
            line-height: 1.7;
        }
        
        .json-key {
            color: #9ca3af; /* Grey for keys - not highlighted */
            font-weight: normal;
        }
        
        .json-string {
            color: #ffffff; /* White for string values - highlighted */
            font-weight: 500;
        }
        
        .json-punctuation {
            color: #6b7280; /* Dark grey for braces/commas */
            opacity: 0.5;
        }
        
.terminal-output span {
    padding-left: 10px; /* Apply padding only to individual spans */
}


        .blink {
            animation: blink 1s step-end infinite;
            margin-left: 5px;
        }
        
        @keyframes blink {
            50% { opacity: 0; }
        }
        
        .constellation {
            position: absolute; /* Changed from relative to absolute */
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            margin-bottom: 0; /* Removed margin */
            opacity: 0.5; /* Reduced opacity */
            z-index: 1; /* Lower z-index than terminal boxes */
            pointer-events: none; /* Allow clicks to pass through */
        }
        
        .star-point {
            position: absolute;
            width: 3px;
            height: 3px;
            border-radius: 50%;
            background-color: #fff;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
            animation: star-pulse 3s infinite;
            z-index: 1;
        }
        
        .constellation-line {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            transform-origin: left center;
            z-index: 0;
            opacity: 0.6;
        }
        
        @keyframes star-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.7; }
        }
        
        .mystery-text {
            position: relative;
            margin: 12px 0; /* Reduced from 20px */
            padding: 12px; /* Reduced from 15px */
            background: rgba(10, 10, 25, 0.7);
            border-radius: 5px;
            border-left: 3px solid #ffffff;
            font-style: italic;
            color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(6px);
            max-width: 700px; /* Reduced from 800px */
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 85%; /* Reduced from 90% */
            overflow: visible; /* Ensure text doesn't get cut off */
            z-index: 2; /* Ensure text appears above background elements */
            font-size: 0.9rem; /* Slightly reduced font size */
            box-sizing: border-box; /* Include padding in width calculation */
        }
        
        .mystery-text:before {
            content: '"';
            font-size: 3em; /* Reduced from 4em */
            position: absolute;
            top: -15px; /* Adjusted from -20px */
            left: 10px;
            color: rgba(255, 255, 255, 0.3);
        }
        
        .mystery-text:after {
            content: '"';
            font-size: 3em; /* Reduced from 4em */
            position: absolute;
            bottom: -45px; /* Adjusted from -60px */
            right: 10px;
            color: rgba(255, 255, 255, 0.3);
        }
        
        .skill {
            display: inline-block;
            padding: 4px 12px;
            margin: 4px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #e0e0e0;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background-color: rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }
        
        .skill:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 255, 255, 0.1);
        }
        
        .highlight {
            color: #ffffff;
            font-weight: normal;
        }
        
        .project-link {
            text-decoration: none;
            color: #ffffff;
            display: inline-block;
            padding: 6px 18px; /* Increased padding */
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            margin-top: 15px;
            transition: all 0.3s ease;
            font-size: 0.9rem; /* Slightly smaller font */
            background-color: rgba(255, 255, 255, 0.1); /* Added background for better visibility */
        }
        
        .project-link:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(255, 255, 255, 0.3);
        }
        
        /* Navigation dots */
        .navigation {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .nav-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .nav-dot:before {
            content: attr(data-label);
            position: absolute;
            right: 25px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .nav-dot:hover:before {
            opacity: 1;
        }
        
        .nav-dot.active {
            background-color: white;
            box-shadow: 0 0 10px white;
        }
        
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 2px;
            background: linear-gradient(90deg, #ffffff, white);
            z-index: 100;
            transition: width 0.1s;
        }
        
        .scroll-indicator {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.7;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.3; }
            50% { opacity: 0.8; }
            100% { opacity: 0.3; }
        }
        
        .contact-button {
            display: inline-block;
            margin-top: 20px; /* Reduced from 30px */
            padding: 8px 20px; /* Reduced from 10px 25px */
            background: rgba(10, 10, 25, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.6);
            color: #fff;
            text-decoration: none;
            font-family: 'Space Mono', monospace;
            letter-spacing: 2px;
            border-radius: 30px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            z-index: 1;
            text-transform: uppercase;
            font-size: 0.85rem; /* Reduced from 0.9rem */
        }
        
        .contact-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: all 0.6s ease;
            z-index: -1;
        }
        
        .contact-button:hover:before {
            left: 100%;
        }
        
        .contact-button:hover {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            border-color: rgba(255, 255, 255, 0.8);
        }
        
        .translate-button {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px 18px;
            background: rgba(10, 10, 25, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.6);
            color: #fff;
            text-decoration: none;
            font-family: 'Space Mono', monospace;
            letter-spacing: 2px;
            border-radius: 20px;
            transition: all 0.3s ease;
            z-index: 100;
            font-size: 0.85rem;
            backdrop-filter: blur(6px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            text-transform: uppercase;
            overflow: hidden; /* Add this to contain the pseudo-element */
        }
        
        .translate-button:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.8);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.3);
        }
        
        .translate-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%; /* Start position */
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: all 0.6s ease;
            z-index: -1;
        }
        
        .translate-button:hover:before {
            left: 100%; /* End position */
            transition: all 0.6s ease; /* Ensure the animation runs properly */
        }
        
        .founder-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            margin: 15px 0 25px 0;
            padding: 12px 30px;
            background: rgba(10, 10, 25, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .founder-link:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s ease;
        }
        
        .founder-link:hover:before {
            left: 100%;
        }
        
        .founder-link:hover {
            border-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.4), 0 0 60px rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }
        
        .founder-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        
        .founder-company {
            font-size: 1.6rem;
            font-weight: 700;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
            letter-spacing: 0px;
            background: linear-gradient(90deg, #fff, #ccc, #fff);
            background-size: 200% auto;
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            animation: shine 4s linear infinite;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');
        
        /* Add media queries for better responsiveness */
        @media screen and (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                letter-spacing: 5px;
            }
            
            .mystery-text {
                width: 95%;
                padding: 12px; /* Reduced from 15px */
                font-size: 0.9rem; /* Slightly reduced font size */
            }
            
            .terminal-box {
                padding: 12px; /* Adjusted for mobile */
            }
            
            .terminal-output {
                margin-left: 10px; /* Reduced margin on mobile */
            }
        }
        
        /* Shooting Star Effect - Starfury Style */
        .shooting-star-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5; /* Behind menus (z-index 10+) but in front of canvas (z-index 0) */
            overflow: hidden;
            perspective: 1000px;
        }
        
        .shooting-star {
            position: absolute;
            pointer-events: none;
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 
                0 0 10px 4px rgba(255, 255, 255, 1),
                0 0 20px 8px rgba(255, 255, 255, 0.8),
                0 0 40px 16px rgba(255, 255, 255, 0.4),
                0 0 60px 24px rgba(255, 255, 255, 0.2);
            filter: blur(0.5px);
        }
        
        .shooting-star-trail {
            position: absolute;
            pointer-events: none;
            width: 400px;
            height: 4px;
            background: linear-gradient(to right, 
                rgba(255, 255, 255, 1) 0%,
                rgba(255, 255, 255, 0.9) 5%,
                rgba(255, 255, 255, 0.7) 15%,
                rgba(255, 255, 255, 0.5) 30%,
                rgba(255, 255, 255, 0.3) 50%,
                rgba(255, 255, 255, 0.15) 70%,
                rgba(255, 255, 255, 0.05) 85%,
                rgba(255, 255, 255, 0) 100%
            );
            transform-origin: left center;
            box-shadow: 0 0 12px 3px rgba(255, 255, 255, 0.4);
            border-radius: 2px 0 0 2px;
        }
    </style>
</head>
<body>
    <!-- Navigation to Translate page and Docs Exporter -->
    <a href="https://otso.veistera.com/translate" class="translate-button">LaTeXToCalc</a>
    <a href="https://otso.veistera.com/docs-exporter" class="translate-button" style="top: 70px;">Docs Export</a>
    
    <!-- Scroll progress indicator -->
    <div class="scroll-progress" id="scroll-progress"></div>
    
    <!-- Navigation dots -->
    <div class="navigation">
        <div class="nav-dot active" data-section="0" data-label="Identity"></div>
        <div class="nav-dot" data-section="1" data-label="Experience"></div>
        <div class="nav-dot" data-section="2" data-label="Connection"></div>
    </div>
    
    <!-- Content sections -->
    <section class="section active" id="section0" data-depth="0">
        <h1>Otso Veisterä</h1>
        
        <a href="https://thetokencompany.com" target="_blank" class="founder-link">
            <span class="founder-label">Founder of</span>
            <span class="founder-company">TheTokenCompany.com</span>
        </a>
        
        <div class="content-grid">
            <div class="grid-item" style="--delay: 2">
                <div class="terminal-box">
                    <div class="terminal-content">
                        <span class="terminal-command">$ whoami</span><br>
                        <span class="terminal-output">founder & ai_engineer</span><br><br>
                        
                        <span class="terminal-command">$ cat skills.txt</span><br>
                        <span class="terminal-output">
                            <span class="skill">Machine Learning</span>
                            <span class="skill">AI Development</span>
                            <span class="skill">Full-Stack Development</span>
                            <span class="skill">Python</span>
                            <span class="skill">Rust</span>
                        </span><br><br>
                        
                        <span class="terminal-command">$ echo $achievements</span><br>
                        <span class="terminal-output">
                            <span>  - Coder of The Year</span><br>
                            <span>  - Young Innovator</span><br>
                            <span style="color: #ffffff; font-weight: bold;">  - Best Physics Report in Finland — National Problem-Solving Champion</span><br>
                        </span>
                    </div>
                </div>
            </div>
            
        </div>
        
        <a href="#" class="contact-button" onclick="scrollToSection(1); return false;">Discover More</a>
    </section>
    
    <section class="section" id="section1" data-depth="1">
        <h1>Experience</h1>
        
        <div class="content-grid">
            <div class="grid-item" style="--delay: 2">
                <div class="terminal-box">
                    <div class="terminal-content">
                        <span class="terminal-command">$ cat experience.log | head</span><br><br>

                        <span class="terminal-tag">[Entrepreneur In Residence @ Lifeline Ventures]</span> <span class="terminal-comment">// Sep-Dec 2025</span><br>
                        <span class="terminal-output">
                            Building an LLM input optimization startup with support from Lifeline Ventures.<br>
                        </span><br><br>

                        <span class="terminal-tag">[FR8 Maverick]</span> <span class="terminal-comment">// Jun-Aug 2025</span><br>
                        <span class="terminal-output">
                             Selected to be part of the world's first hacker hotel, startup incubator, and research lab, all combined into one. Immersed in an environment dedicated to solving complex problems and building the future.
                        </span><br><br>

                        <span class="terminal-tag">[Planmeca]</span> <span class="terminal-comment">// Jun-Jul 2024</span><br>
                        <span class="terminal-output">
                            Developed AI for 3D medical imaging<br>
                            PyTorch-based segmentation model<br>
                            Improved diagnostic workflows
                        </span><br>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="section" id="section2" data-depth="2">
        <h1>Connect</h1>
        
        <div class="content-grid" style="grid-template-columns: 1fr; max-width: 500px;">
            <div class="grid-item" style="--delay: 2">
                <div class="terminal-box">
                    <div class="terminal-content">
                        <span class="terminal-command">$ get_in_touch</span><br>
                        <span class="terminal-output">
                            <span>// Professional Inquiries & Collaboration</span><br>
                            <span>Email: <a href="mailto:otso@veistera.com" class="glowing-text">otso@veistera.com</a></span><br>
                            <span>LinkedIn: <a href="https://www.linkedin.com/in/otso-veistera" class="glowing-text" target="_blank">linkedin.com/in/otso-veistera</a></span><br>
                            <span>GitHub: <a href="https://github.com/OtsoBear" class="glowing-text" target="_blank">github.com/OtsoBear</a></span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <a href="https://www.linkedin.com/in/otso-veistera" class="contact-button" target="_blank">Connect on LinkedIn</a>
    </section>
    
    <div class="scroll-indicator">Scroll to explore</div>
    
    <script type="module">
        import * as THREE from 'three';
        
        let renderer, scene, camera;
        let instancedStars;
        let timer = {
            lastTime: 0,
            frameInterval: 1000 / 60,
            getDelta: function(currentTime) {
                const elapsed = currentTime - this.lastTime;
                if (elapsed < this.frameInterval) return 0;
                this.lastTime = currentTime - (elapsed % this.frameInterval);
                return elapsed;
            }
        };

        let needsRender = true;
        let lastInteraction = Date.now();
        const IDLE_THRESHOLD = 5000;

        // CHANGE 1: Add variables for scroll velocity
        let scrollY = 0;
        let lastScrollY = 0;
        let scrollVelocity = 0;
        let scrollPositionAccumulator = 0; // This will drive the shader

        let currentSection = 0;
        let targetSection = 0;

        const sectionCoordinates = [
            { x: 0, y: 0, z: 0 },
            { x: 120, y: 30, z: -80 },
            { x: 0, y: 0, z: -160 }
        ];

        // --- VELOCITY-DRIVEN & COMPLEX SHADER CODE (GLSL) ---
        const vertexShader = `
            attribute vec3 instanceOffset;
            attribute vec3 instanceDrift; // Added for lateral movement
            attribute float instanceScale;
            attribute float parallaxFactor; // Renamed from instanceSpeed.x
            attribute float initialZ;

            uniform float uScrollZ;
            varying float vAlpha;
            varying vec2 vUv;

            void main() {
                vUv = uv;

                // Z-position is driven by the scroll accumulator and parallax
                float zOffset = initialZ - (uScrollZ * parallaxFactor);
                
                // MUCH longer travel distance for continuous zooming experience
                float travelDistance = 10000.0;
                float loopedZ = mod(zOffset, travelDistance) - travelDistance / 2.0;

                // CHANGE 2: Increased lateral drift for more swirling effect
                vec3 animatedOffset = vec3(
                    instanceOffset.x + (instanceDrift.x * uScrollZ * 0.02),
                    instanceOffset.y + (instanceDrift.y * uScrollZ * 0.02),
                    loopedZ
                );
                
                vec4 modelViewPosition = modelViewMatrix * vec4(animatedOffset, 1.0);
                modelViewPosition.xyz += position * instanceScale;
                vAlpha = 1.0 - smoothstep(-200.0, 40.0, modelViewPosition.z);

                gl_Position = projectionMatrix * modelViewPosition;
            }
        `;

        const fragmentShader = `
            uniform sampler2D uTexture;
            varying float vAlpha;
            varying vec2 vUv;

            void main() {
                vec4 texColor = texture2D(uTexture, vUv);
                if (texColor.a < 0.1) discard;

                gl_FragColor = vec4(texColor.rgb, texColor.a * vAlpha);
            }
        `;

        function init() {
            createConstellation();
            const isLowEndDevice = navigator.hardwareConcurrency <= 4 || navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i);
            renderer = new THREE.WebGLRenderer({ antialias: false, alpha: true, powerPreference: "high-performance", precision: "lowp" });
            const resolutionScale = isLowEndDevice ? 0.6 : 0.8;
            renderer.setSize(window.innerWidth * resolutionScale, window.innerHeight * resolutionScale);
            renderer.domElement.style.width = '100%';
            renderer.domElement.style.height = '100%';
            renderer.setPixelRatio(1);
            document.body.appendChild(renderer.domElement);
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(65, window.innerWidth / window.innerHeight, 0.1, 5000); // Increased far plane from 2000 to 5000
            camera.position.set(0, 0, 40);
            createInstancedStars(isLowEndDevice);
            setupEventListeners();
            animateWithThrottling();
            updateSectionVisibility();
            ensureTextVisibility();
            applyDeviceSpecificScaling();
            fixScrollSections();
        }

        function createInstancedStars(isLowEndDevice) {
            const totalStars = isLowEndDevice ? 1000 : 8000; // Back to normal for low-end, dramatic for high-end
            const starGeometry = new THREE.PlaneGeometry(1, 1);
            const geometry = new THREE.InstancedBufferGeometry();
            geometry.index = starGeometry.index;
            geometry.attributes = starGeometry.attributes;

            const instanceOffsets = new Float32Array(totalStars * 3);
            const initialZs = new Float32Array(totalStars);
            const instanceDrifts = new Float32Array(totalStars * 3); // For lateral drift
            const instanceScales = new Float32Array(totalStars);
            const parallaxFactors = new Float32Array(totalStars);

            // CHANGE 3: Make the starfield MUCH deeper for more dramatic zoom
            const bounds = { x: [-800, 800], y: [-600, 600], z: [-8000, 200] };

            for (let i = 0; i < totalStars; i++) {
                const i3 = i * 3;
                instanceOffsets[i3 + 0] = Math.random() * (bounds.x[1] - bounds.x[0]) + bounds.x[0];
                instanceOffsets[i3 + 1] = Math.random() * (bounds.y[1] - bounds.y[0]) + bounds.y[0];
                instanceOffsets[i3 + 2] = 0;

                initialZs[i] = Math.random() * (bounds.z[1] - bounds.z[0]) + bounds.z[0];
                
                // Populate drift vectors with small random values
                instanceDrifts[i3 + 0] = (Math.random() - 0.5) * 2.0;
                instanceDrifts[i3 + 1] = (Math.random() - 0.5) * 2.0;
                instanceDrifts[i3 + 2] = 0;

                instanceScales[i] = isLowEndDevice ? Math.random() * 1.8 + 1.2 : Math.random() * 2.5 + 1.5;
                
                // CHANGE 4: DRAMATICALLY exaggerate parallax for extreme zoom effect
                parallaxFactors[i] = Math.random() * 2.5 + 0.5; // Much higher range (0.5-3.0)
            }

            geometry.setAttribute('instanceOffset', new THREE.InstancedBufferAttribute(instanceOffsets, 3));
            geometry.setAttribute('initialZ', new THREE.InstancedBufferAttribute(initialZs, 1));
            geometry.setAttribute('instanceDrift', new THREE.InstancedBufferAttribute(instanceDrifts, 3));
            geometry.setAttribute('instanceScale', new THREE.InstancedBufferAttribute(instanceScales, 1));
            geometry.setAttribute('parallaxFactor', new THREE.InstancedBufferAttribute(parallaxFactors, 1));

            const material = new THREE.ShaderMaterial({
                uniforms: {
                    uScrollZ: { value: 0.0 },
                    uTexture: { value: createStarTexture() }
                },
                vertexShader,
                fragmentShader,
                transparent: true,
                depthWrite: false,
                blending: THREE.AdditiveBlending,
            });

            instancedStars = new THREE.Mesh(geometry, material);
            
            // --- ADD THIS LINE ---
            instancedStars.frustumCulled = false;
            
            scene.add(instancedStars);
        }

        function createStarTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 32;
            canvas.height = 32;
            const ctx = canvas.getContext('2d');
            const gradient = ctx.createRadialGradient(16, 16, 0, 16, 16, 16);
            gradient.addColorStop(0, 'rgba(255,255,255,1)');
            gradient.addColorStop(0.2, 'rgba(255,255,255,0.8)');
            gradient.addColorStop(1, 'rgba(255,255,255,0)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 32, 32);
            return new THREE.CanvasTexture(canvas);
        }

        // CHANGE 5: Modify the scroll event listener to calculate velocity
        function setupEventListeners() {
            const trackInteraction = () => {
                lastInteraction = Date.now();
                needsRender = true;
            };

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                
                const isLowEndDevice = navigator.hardwareConcurrency <= 4 || 
                                     navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i);
                const resolutionScale = isLowEndDevice ? 0.6 : 0.8;
                renderer.setSize(window.innerWidth * resolutionScale, window.innerHeight * resolutionScale);
                
                trackInteraction();
            });

            // This is the core of the new velocity system
            window.addEventListener('scroll', () => {
                scrollY = window.scrollY;
                let deltaY = scrollY - lastScrollY;
                lastScrollY = scrollY;
                
                // Detect mobile for slower zoom
                const isMobile = window.innerWidth < 900;
                const scrollSensitivity = isMobile ? 0.04 : 0.08; // Slower on mobile
                scrollVelocity += deltaY * scrollSensitivity;

                const maxScroll = document.body.scrollHeight - window.innerHeight;
                const scrollPercent = (scrollY / maxScroll) * 100;
                document.getElementById('scroll-progress').style.width = `${scrollPercent}%`;

                const windowHeight = window.innerHeight;
                targetSection = Math.round(scrollY / windowHeight);
                targetSection = Math.max(0, Math.min(2, targetSection));
                
                updateNavigation();
                updateSectionVisibility();

                if (scrollY > 100) { document.querySelector('.scroll-indicator').style.opacity = '0'; }
                trackInteraction();
            }, { passive: true });

            // Track other user interactions
            window.addEventListener('mousemove', trackInteraction);
            window.addEventListener('click', (e) => {
                trackInteraction();
                createShootingStar(e.clientX, e.clientY);
            });
            window.addEventListener('keydown', trackInteraction);
            window.addEventListener('touchstart', trackInteraction);
            
            // Handle navigation dot clicks
            document.querySelectorAll('.nav-dot').forEach(dot => {
                dot.addEventListener('click', () => {
                    const sectionIndex = parseInt(dot.dataset.section);
                    scrollToSection(sectionIndex);
                    trackInteraction();
                });
            });
            
            // Update section visibility on page load and resize
            window.addEventListener('load', updateSectionVisibility);
            window.addEventListener('resize', updateSectionVisibility);
        }

        function animateWithThrottling(currentTime = 0) {
            requestAnimationFrame(animateWithThrottling);
            const elapsed = timer.getDelta(currentTime);
            const timeSinceInteraction = Date.now() - lastInteraction;
            if (timeSinceInteraction > IDLE_THRESHOLD && elapsed === 0 && !needsRender) return;

            if (document.visibilityState !== 'hidden') {
                // ADD THIS CHECK to prevent accessing undefined objects
                if (!camera || !renderer) return;

                moveCamera();

                // CHANGE 6: Update the animation based on velocity
                if (instancedStars) {
                    // Update the accumulated position with the current velocity
                    scrollPositionAccumulator += scrollVelocity;
                    
                    // Reduced friction to maintain velocity longer for dramatic effect
                    scrollVelocity *= 0.92;

                    // Update the shader with the accumulated position
                    instancedStars.material.uniforms.uScrollZ.value = scrollPositionAccumulator;
                }
                
                renderer.render(scene, camera);
            }
            needsRender = false;
        }

        // Pause rendering when tab is not visible to save resources
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'hidden') {
                // Nothing needed - our animation loop already checks for visibility
            } else {
                // Resume animation with fresh timer to avoid large jumps
                timer.lastTime = performance.now();
                needsRender = true;
                lastInteraction = Date.now();
            }
        });

        // Add this function to fix section scrolling
        function fixScrollSections() {
            // Set up the page for full-section scrolling
            document.body.style.scrollSnapType = 'y mandatory';
            
            // Make each section take exactly one viewport height
            document.querySelectorAll('.section').forEach(section => {
                section.style.height = '100vh';
                section.style.scrollSnapAlign = 'start';
            });
            
            // Fix the scrollToSection function to properly handle section navigation
            window.scrollToSection = function(index) {
                targetSection = index;
                window.scrollTo({
                    top: index * window.innerHeight,
                    behavior: 'smooth'
                });
                
                // Update section visibility immediately
                updateSectionVisibility();
                
                // Update navigation dots
                updateNavigation();
            };
        }

        function createConstellation() {
            const constellation = document.getElementById('constellation');
            if (!constellation) return;
            
            // Clear any existing elements
            constellation.innerHTML = '';
            
            // Create stars
            const starCount = 12; // Reduced number of stars
            const stars = [];
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star-point';
                
                // Random position within the container but avoid center area
                let left, top;
                
                // Distribute stars more towards edges to avoid center text
                if (Math.random() < 0.5) {
                    left = Math.random() * 30 + 5; // Left side
                } else {
                    left = Math.random() * 30 + 65; // Right side
                }
                
                // Top or bottom positioning
                if (Math.random() < 0.5) {
                    top = Math.random() * 30 + 5; // Top area
                } else {
                    top = Math.random() * 30 + 65; // Bottom area
                }
                
                star.style.left = `${left}%`;
                star.style.top = `${top}%`;
                star.style.animationDelay = `${Math.random() * 2}s`;
                
                constellation.appendChild(star);
                stars.push({ left, top, element: star });
            }
            
            // Create fewer lines between stars
            for (let i = 0; i < stars.length - 1; i += 2) { // Skip every other star for fewer lines
                if (Math.random() < 0.5) { // 50% chance to create a line
                    const star1 = stars[i];
                    const star2 = stars[i + 1];
                    
                    const line = document.createElement('div');
                    line.className = 'constellation-line';
                    
                    // Position and rotate the line
                    const dx = star2.left - star1.left;
                    const dy = star2.top - star1.top;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx);
                    
                    line.style.width = `${distance}%`;
                    line.style.left = `${star1.left}%`;
                    line.style.top = `${star1.top}%`;
                    line.style.transform = `rotate(${angle}rad)`;
                    
                    constellation.appendChild(line);
                }
            }
        }
        
        function updateNavigation() {
            document.querySelectorAll('.nav-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === targetSection);
            });
        }
        
        function updateSectionVisibility() {
            if (window._lastActiveSection === targetSection) return;
            
            document.querySelectorAll('.section').forEach((section, index) => {
                if (index === targetSection) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
            
            window._lastActiveSection = targetSection;
        }
        
        function scrollToSection(index) {
            window.scrollTo({
                top: index * window.innerHeight,
                behavior: 'smooth'
            });
        }
        
        function moveCamera() {
            currentSection += (targetSection - currentSection) * 0.05;
            
            const index = Math.floor(currentSection);
            const nextIndex = Math.min(2, index + 1);
            const fraction = currentSection - index;
            
            const currentCoord = sectionCoordinates[index];
            const nextCoord = sectionCoordinates[nextIndex];
            
            const targetX = currentCoord.x + (nextCoord.x - currentCoord.x) * fraction;
            const targetY = currentCoord.y + (nextCoord.y - currentCoord.y) * fraction;
            const targetZ = currentCoord.z + (nextCoord.z - currentCoord.z) * fraction;
            
            camera.position.x += (targetX - camera.position.x) * 0.05;
            camera.position.y += (targetY - camera.position.y) * 0.05;
            camera.position.z += (targetZ - camera.position.z) * 0.05;
            
            camera.lookAt(targetX, targetY, targetZ - 100);
            
            rotateCamera();
        }
        
        let mouseX = 0;
        let mouseY = 0;
        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = (event.clientY / window.innerHeight) * 2 - 1;
        });
        
        function rotateCamera() {
            camera.position.x += (mouseX * 3 - camera.position.x) * 0.005;
            camera.position.y += (-mouseY * 3 - camera.position.y) * 0.005;
            
            camera.lookAt(camera.position.x, camera.position.y, camera.position.z - 100);
        }
        
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                // ADD THIS CHECK to prevent accessing undefined objects
                if (!camera || !renderer) return;

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                
                applyDeviceSpecificScaling();
            }, 250);
        });
        
        function applyDeviceSpecificScaling() {
            const isMobile = window.innerWidth < 900;
            
            if (isMobile) {
                document.documentElement.style.setProperty('--section-scale', '0.3');
            } else {
                const scale = Math.min(0.9, Math.max(0.8, window.innerWidth / 1440));
                document.documentElement.style.setProperty('--section-scale', scale.toString());
            }
        }

        function ensureTextVisibility() {
            document.querySelectorAll('.mystery-text').forEach(el => {
                el.style.maxHeight = 'none';
                el.style.height = 'auto';
            });
            
            document.querySelectorAll('.grid-item').forEach(item => {
                item.style.minHeight = 'auto';
            });
        }
        
        // Shooting star effect on click - Starfury style, edge to edge with curve
        function createShootingStar(clickX, clickY) {
            // Create container for the star
            let container = document.querySelector('.shooting-star-container');
            if (!container) {
                container = document.createElement('div');
                container.className = 'shooting-star-container';
                document.body.appendChild(container);
            }
            
            const star = document.createElement('div');
            star.className = 'shooting-star';
            container.appendChild(star);
            
            const screenW = window.innerWidth;
            const screenH = window.innerHeight;
            
            // Determine start point - from the edges, within top 75% of screen
            // Random choice: start from top, left, or right edge
            const startEdge = Math.random();
            let startX, startY;
            
            if (startEdge < 0.5) {
                // Start from top edge
                startX = Math.random() * screenW;
                startY = -50;
            } else if (startEdge < 0.75) {
                // Start from left edge (top 75%)
                startX = -50;
                startY = Math.random() * screenH * 0.75;
            } else {
                // Start from right edge (top 75%)
                startX = screenW + 50;
                startY = Math.random() * screenH * 0.75;
            }
            
            // Calculate end point - straight line through click point
            // The path must pass through the click point
            const dx = clickX - startX;
            const dy = clickY - startY;
            const distToClick = Math.sqrt(dx * dx + dy * dy);
            
            // Extend the line to go off-screen
            const extendFactor = Math.max(screenW, screenH) * 2 / distToClick;
            const endX = startX + dx * extendFactor;
            const endY = startY + dy * extendFactor;
            
            // Calculate the angle of the path (constant for straight line)
            const pathAngle = Math.atan2(dy, dx);
            
            // Random 3D depth angle - makes it look like it's coming towards or away from screen
            const depthAngle = (Math.random() - 0.5) * 120; // -60 to +60 degrees
            
            // Depth direction: positive = coming towards, negative = going away
            const depthDirection = depthAngle > 0 ? 1 : -1;
            
            // Animation parameters
            const duration = 500 + Math.random() * 200; // 500-700ms for snappy but dramatic
            
            // Linear interpolation for straight line
            function lerp(t, p0, p1) {
                return p0 + t * (p1 - p0);
            }
            
            // Create single rectangular trail
            const trail = document.createElement('div');
            trail.className = 'shooting-star-trail';
            trail.style.opacity = '0';
            container.appendChild(trail);
            
            let startTime = null;
            
            // Trail angle - point backwards (opposite to direction of travel)
            const trailAngle = pathAngle + Math.PI;
            
            function animate(currentTime) {
                if (!startTime) startTime = currentTime;
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function for smooth acceleration/deceleration
                const easeProgress = progress < 0.5 
                    ? 2 * progress * progress 
                    : 1 - Math.pow(-2 * progress + 2, 2) / 2;
                
                // Calculate position on straight line
                const x = lerp(easeProgress, startX, endX);
                const y = lerp(easeProgress, startY, endY);
                
                // Calculate dynamic scale based on progress and depth direction
                // Coming towards: starts small, gets bigger (0.5 -> 1.8)
                // Going away: starts big, gets smaller (1.8 -> 0.5)
                let dynamicScale;
                if (depthDirection > 0) {
                    // Coming towards screen - grows as it flies
                    dynamicScale = 0.5 + easeProgress * 1.3;
                } else {
                    // Going away from screen - shrinks as it flies
                    dynamicScale = 1.8 - easeProgress * 1.3;
                }
                
                // Update star position and scale
                star.style.left = `${x}px`;
                star.style.top = `${y}px`;
                star.style.transform = `translate(-50%, -50%) rotateX(${depthAngle}deg) scale(${dynamicScale})`;
                
                // Update trail position, rotation, and scale
                trail.style.left = `${x}px`;
                trail.style.top = `${y}px`;
                trail.style.transform = `translate(0, -50%) rotate(${trailAngle}rad) rotateX(${depthAngle}deg) scale(${dynamicScale})`;
                
                // Fade in at start, fade out at end
                if (progress < 0.1) {
                    const fadeIn = progress * 10;
                    star.style.opacity = fadeIn;
                    trail.style.opacity = fadeIn;
                } else if (progress > 0.85) {
                    const fadeOut = (1 - progress) / 0.15;
                    star.style.opacity = fadeOut;
                    trail.style.opacity = fadeOut;
                } else {
                    star.style.opacity = '1';
                    trail.style.opacity = '1';
                }
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // Clean up
                    setTimeout(() => {
                        star.remove();
                        trail.remove();
                    }, 100);
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        window.addEventListener('load', init);
    </script>
</body>
</html>